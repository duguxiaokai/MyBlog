<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>所有bug</title>
<link rel='stylesheet' type='text/css' href='__PUBLIC__/Landz/css/mail.css' />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/Landz/css/global.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/Landz/css/right.css"/>
<script src="__PUBLIC__/js/popup.js"></script>
<script src="__PUBLIC__/jusaas/js/common.js"></script>
<script src="__PUBLIC__/jusaas/js/autoform.js"></script>
<script src="__PUBLIC__/jusaas/js/MCSSTable.js"></script>
<script src="__PUBLIC__/themes/yellow1/js/theme.js"></script>
<script src="__PUBLIC__/js/jquery.js" ></script>
</head>
<body class='bodyfontsize'>
<div class="position" id="positionCon"></div>
<div class="gukeCon">
   <table id="mcss_table"></table>
</div>
<div id='background' class='background'></div><div id='progressBar' class='progressBar'>数据加载中，请稍等...</div>
</body>
</html>

<script type="text/javascript">
var modelid=geturlparam('modelid');//'oa_bug';
$(document).ready(function()
{	
	var field_dealing=[{'subject':myshow_subject}];
	var mcssTable=new MCSSTable({tableid:"mcss_table",modelid:modelid,homeUrl:"__APP__",showtitle:true,last_td_name:"操作",special_field_show:field_dealing,width:'100%'},null,last_td);
	mcssTable.run();
});
function myshow_subject(fieldvalue,record)
{
	if(fieldvalue == '')
	{	
		var content=record.content;
		var newtitle = content.substring(0,20);
		return "<a href='__APP__/Oa/Bug/viewbug/id/"+record.id+"'>"+newtitle+"</a>";
	}else{
		return "<a href='__APP__/Oa/Bug/viewbug/id/"+record.id+"'>"+fieldvalue+"</a>";
	}
}
function last_td(id)
{
	return "<input class='daKaiBut' onClick='find_url("+id+")' type='button' value='查看'><input class='daKaiBut' onClick='find_url1("+id+")' type='button' value='编辑'><input class='daKaiBut' onClick='find_url2("+id+")' type='button' value='回复'>";
}
function find_url(id)
{	
	location.href="__APP__/Oa/Bug/viewbug/id/"+id;
}
function find_url1(id)
{	
	//调用没有滚动条的iframe
	ShowIframeNoScroll("__APP__/Oa/Bug/saveBug/model/"+modelid+"/tablename/oa_bug/id/"+id,"900","500","编辑bug");
}
function find_url2(id)
{
	//调用没有滚动条的iframe
	ShowIframeNoScroll("__APP__/Oa/Bug/addreply/model/oa_bug_reply/tablename/oa_bug_reply/pid/"+id,"360","220","回复bug");
}
</script>
 

